(()=>{var e={};e.id=40,e.ids=[40],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},95930:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(85088),s(51160),s(1121),s(90996),s(39707);var r=s(30170),l=s(45002),a=s(83876),n=s.n(a),i=s(66299),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["(app)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85088)),"F:\\Coding\\Flowlane\\src\\app\\(app)\\dashboard\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,51160)),"F:\\Coding\\Flowlane\\src\\app\\(app)\\dashboard\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1121)),"F:\\Coding\\Flowlane\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,39707)),"F:\\Coding\\Flowlane\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["F:\\Coding\\Flowlane\\src\\app\\(app)\\dashboard\\page.tsx"],u="/(app)/dashboard/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(app)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},61897:(e,t,s)=>{Promise.resolve().then(s.bind(s,76728))},35303:()=>{},70591:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(26323).Z)("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]])},74747:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(26323).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},66903:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(26323).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},76728:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var r=s(97247),l=s(28964),a=s(35224),n=s(55757),i=s(26780),d=s(94830),o=s(21578),c=s(5519),u=s(79906),x=s(40677);function m({title:e,value:t,href:s}){return r.jsx(u.default,{href:s,className:"group block",children:(0,r.jsxs)(n.Zb,{className:(0,x.cn)("glass shadow-soft transition group-hover:-translate-y-0.5"),children:[r.jsx(n.Ol,{className:"pb-2",children:r.jsx(n.ll,{className:"text-sm font-medium text-muted-foreground",children:e})}),r.jsx(n.aY,{children:r.jsx("div",{className:"text-2xl font-semibold",children:t})})]})})}var p=s(17818),h=s(87597),f=s(28852),g=s(70887),j=s(81299),v=s(20977),y=s(66903),N=s(74747),b=s(70591);let w=(0,s(26323).Z)("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);var M=s(14434),F=s(87774);let k={"Follow-up":j.Z,Milestone:v.Z,Invoice:y.Z};function C({items:e,maxItems:t,viewAllHref:s}){let[n,i]=(0,l.useState)(e),o=t?n.slice(0,t):n,{addActivity:x}=(0,F.X)();return(0,r.jsxs)("div",{className:"space-y-3",children:[s&&r.jsx("div",{className:"flex justify-end",children:r.jsx(f.z,{asChild:!0,variant:"ghost",size:"sm",children:r.jsx(u.default,{href:s,children:"View all"})})}),o.map(e=>{let t=k[e.type],s=(0,a.cF)(e.dueAt);return(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border bg-background p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-muted",children:r.jsx(t,{className:"h-4 w-4 text-muted-foreground"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-sm font-semibold",children:e.title}),s&&r.jsx(h.C,{variant:"danger",children:"Overdue"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.meta}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Next due ",(0,a.mn)(e.dueAt)]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(g.pn,{children:[r.jsx(M.$,{permission:"followups:update",tooltip:"Owner only",children:r.jsx(f.z,{size:"icon",variant:"ghost",onClick:()=>(function(e){i(t=>t.filter(t=>t.id!==e)),p.A.success("Marked as done.");let t=n.find(t=>t.id===e);t&&x({entityType:t.entityType,entityId:t.entityId,action:"Marked done",meta:t.title})})(e.id),children:r.jsx(N.Z,{className:"h-4 w-4"})})}),r.jsx(M.$,{permission:"followups:update",tooltip:"Owner only",children:r.jsx(f.z,{size:"icon",variant:"ghost",onClick:()=>(function(e){i(t=>t.map(t=>t.id===e?{...t,dueAt:(0,c.E)((0,d.D)(t.dueAt),2).toISOString()}:t)),p.A.message("Snoozed for 2 days.");let t=n.find(t=>t.id===e);t&&x({entityType:t.entityType,entityId:t.entityId,action:"Snoozed",meta:"+2 days"})})(e.id),children:r.jsx(b.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(g.u,{children:[r.jsx(g.aJ,{asChild:!0,children:r.jsx(f.z,{asChild:!0,size:"icon",variant:"ghost",children:r.jsx(u.default,{href:e.href,children:r.jsx(w,{className:"h-4 w-4"})})})}),r.jsx(g._v,{children:"Open"})]})]})})]},e.id)})]})}var A=s(75468),D=s(77081);function O(){let e="owner"===(0,D.q)(),{contacts:t,invoices:s,projects:u,milestones:x}=(0,A.O)(),p=new Date,h=(0,l.useMemo)(()=>t.filter(e=>(0,a.HM)(e.nextFollowUpAt,p)).length,[t,p]),f=(0,l.useMemo)(()=>t.filter(e=>(0,a.cF)(e.nextFollowUpAt,p)).length,[t,p]),g=(0,l.useMemo)(()=>e?s.filter(e=>"paid"!==e.status).reduce((e,t)=>e+t.lineItems.reduce((e,t)=>e+t.qty*t.rate,0),0):null,[s,e]),j=(0,l.useMemo)(()=>e?s.flatMap(e=>e.payments).filter(e=>(0,i.x)((0,d.D)(e.paidAt),p)).reduce((e,t)=>e+t.amount,0):null,[s,e,p]),v=(0,l.useMemo)(()=>e?s.filter(e=>"overdue"===e.status).reduce((e,t)=>e+t.lineItems.reduce((e,t)=>e+t.qty*t.rate,0),0):null,[s,e]),y=(0,l.useMemo)(()=>[...t.filter(e=>(0,a.cF)(e.nextFollowUpAt,p)).map(e=>({id:`followup-${e.id}`,title:`Overdue follow-up: ${e.name}`,meta:`${e.company} - Due ${(0,a.mn)(e.nextFollowUpAt)}`,type:"Follow-up",dueAt:e.nextFollowUpAt,href:`/contacts/${e.id}`,entityType:"contact",entityId:e.id})),...x.filter(e=>{let t=(0,d.D)(e.dueDate);return(0,o.A)(t,p)&&(0,o.A)((0,c.E)(p,7),t)}).map(e=>{let t=u.find(t=>t.id===e.projectId);return{id:`milestone-${e.id}`,title:`Milestone due: ${e.title}`,meta:`${t?.title??"Project"} - Due ${(0,a.mn)(e.dueDate)}`,type:"Milestone",dueAt:e.dueDate,href:`/projects/${e.projectId}`,entityType:"milestone",entityId:e.id}}),...s.filter(e=>"overdue"===e.status).map(e=>{let s=t.find(t=>t.id===e.contactId);return{id:`invoice-${e.id}`,title:`Overdue invoice ${e.invoiceNo}`,meta:`${s?.company??"Client"} - Due ${(0,a.mn)(e.dueDate)}`,type:"Invoice",dueAt:e.dueDate,href:`/invoices/${e.id}`,entityType:"invoice",entityId:e.id}})],[t,s,x,u,p]),N=(0,l.useMemo)(()=>x.filter(e=>{let t=(0,d.D)(e.dueDate);return(0,o.A)(t,p)&&(0,o.A)((0,c.E)(p,7),t)}).length,[x,p]),b=(0,l.useMemo)(()=>x.filter(e=>"waiting_client"===e.status).length,[x]),w=(0,l.useMemo)(()=>{let e=u.filter(e=>"active"===e.status).length;return{active:e,planning:u.filter(e=>"planning"===e.status).length,onHold:u.filter(e=>"on_hold"===e.status).length,completed:u.filter(e=>"completed"===e.status).length}},[u]);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold",children:"Dashboard"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Welcome back. Here is your live pulse for today."})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[r.jsx(m,{title:"Follow-ups Today",value:h,href:"/contacts?filter=followupsToday"}),r.jsx(m,{title:"Overdue Follow-ups",value:f,href:"/contacts?filter=followupsOverdue"}),e?(0,r.jsxs)(r.Fragment,{children:[r.jsx(m,{title:"Receivables",value:(0,a.lb)(g??0,"USD"),href:"/invoices?status=unpaid"}),r.jsx(m,{title:"This Month Revenue",value:(0,a.lb)(j??0,"USD"),href:"/invoices?filter=thisMonthPaid"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(m,{title:"Milestones Due Soon",value:N,href:"/projects"}),r.jsx(m,{title:"Waiting on Client",value:b,href:"/crm"})]})]}),e?(0,r.jsxs)(n.Zb,{className:"glass",children:[r.jsx(n.Ol,{children:r.jsx(n.ll,{children:"Revenue Summary"})}),(0,r.jsxs)(n.aY,{className:"grid gap-4 sm:grid-cols-3",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Receivables"}),r.jsx("p",{className:"text-lg font-semibold",children:(0,a.lb)(g??0,"USD")})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Overdue"}),r.jsx("p",{className:"text-lg font-semibold",children:(0,a.lb)(v??0,"USD")})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"This month paid"}),r.jsx("p",{className:"text-lg font-semibold",children:(0,a.lb)(j??0,"USD")})]})]})]}):null,(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:r.jsx(n.ll,{children:"Project Pulse"})}),(0,r.jsxs)(n.aY,{className:"grid gap-4 sm:grid-cols-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Planning"}),r.jsx("p",{className:"text-lg font-semibold",children:w.planning})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"}),r.jsx("p",{className:"text-lg font-semibold",children:w.active})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"On Hold"}),r.jsx("p",{className:"text-lg font-semibold",children:w.onHold})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"}),r.jsx("p",{className:"text-lg font-semibold",children:w.completed})]})]})]}),(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{children:r.jsx(n.ll,{children:"My Focus Today"})}),r.jsx(n.aY,{className:"space-y-4",children:0===y.length?r.jsx("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"Nothing urgent today. Review pipeline or plan next milestones."}):r.jsx(C,{items:y,maxItems:4,viewAllHref:"/today"})})]})]})}},14434:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,m:()=>o});var r=s(97247),l=s(28964),a=s(17818),n=s(70887),i=s(92706),d=s(77081);function o({permission:e,children:t}){let s=(0,d.q)();return(0,i.Fs)(s,e)?r.jsx(r.Fragment,{children:t}):null}function c({permission:e,children:t,tooltip:s="Owner only"}){let o=(0,d.q)();if((0,i.Fs)(o,e))return t;let c={...t.props,disabled:!0,onClick:e=>{e.preventDefault(),a.A.error("Only the owner can do this.")}};return r.jsx(n.pn,{children:(0,r.jsxs)(n.u,{children:[r.jsx(n.aJ,{asChild:!0,children:Object.assign(l.cloneElement(t,c))}),r.jsx(n._v,{children:s})]})})}},55757:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>i,Zb:()=>n,aY:()=>o,ll:()=>d});var r=s(97247),l=s(28964),a=s(40677);let n=l.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=l.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let d=l.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle",l.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let o=l.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",l.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},51160:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(72051),l=s(4615);function a(){return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx(l.O,{className:"h-6 w-40"}),r.jsx(l.O,{className:"mt-2 h-4 w-64"})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:Array.from({length:4}).map((e,t)=>r.jsx(l.O,{className:"h-28 w-full"},t))}),r.jsx(l.O,{className:"h-64 w-full"})]})}},85088:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(45347).createProxy)(String.raw`F:\Coding\Flowlane\src\app\(app)\dashboard\page.tsx#default`)},4615:(e,t,s)=>{"use strict";s.d(t,{O:()=>a});var r=s(72051),l=s(39812);function a({className:e}){return r.jsx("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",e)})}},39812:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a});var r=s(36272),l=s(51472);function a(...e){return(0,l.m6)((0,r.W)(e))}},5519:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var r=s(82505);function l(e,t){let s=(0,r.Q)(e);if(isNaN(t)){var l;return l=NaN,e instanceof Date?new e.constructor(l):new Date(l)}return t&&s.setDate(s.getDate()+t),s}},21578:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(82505);function l(e,t){let s=(0,r.Q)(e),l=(0,r.Q)(t);return s.getTime()>l.getTime()}},26780:(e,t,s)=>{"use strict";s.d(t,{x:()=>l});var r=s(82505);function l(e,t){let s=(0,r.Q)(e),l=(0,r.Q)(t);return s.getFullYear()===l.getFullYear()&&s.getMonth()===l.getMonth()}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9379,6936,2960,401,4564,4080,3997,9324,5665,1181,7372,5411],()=>s(95930));module.exports=r})();